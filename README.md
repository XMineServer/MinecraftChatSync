<h1 style="font-size: 50px;">Minecraft Chat Sync</h1>

## Описание
Плагин для paper minecraft сервера, который позволяет синхронизовать чат майнкрафта внутри игры с телеграм чатом.

Такая уникальная функция на вашем сервере позволит игрокам больше вовлекаться в игровой процесс.

## Презентация 
TODO

## Функциональность

1) Отправка всех внутриигровых сообщений в телеграм чат
2) Отправка всех сообщений и телеграм чата на игровой сервер
3) Отправка приватных сообщений из телеграм игроку на сервере и обратно через телеграм бота

## Команда проекта

- Пономарев Дмитрий (тимлид, работа с bukkit API)
- Гиззатуллин Амир (backend разработчик, реализация discord бота)
- Деркунский Виктор (backend разработчик, реализация telegram бота)
- Дорморезов Алексей (backend разработчик, работа с базой данных)
- Бандурин Владислав (backend разработчик)

## Инструкция по сборке

#### Готовая сборка
Актуальная сборка находится в релизах репозитория

#### Ручная сборка
Склонируйте репозиторий, затем вполните ```./gradlew assemble``` из терминала.
Основной плагин будет находится по пути ```Core/build/libs/MinecraftChatSync-<версия>-all.jar```.
Аддон для работы с телеграмм будет находится по пути ```TG/build/libs/MinecraftChatSync-TG-<версия>-all.jar```.

## Настройка

Перед началом работы нужно создать sql базу данных. В данный момент поддерживается mysql, postgres и h2.

В базе данных необходимо инициализировать таблицы [скриптом](https://github.com/XMineServer/MinecraftChatSync/blob/1.0-SNAPSHOT/Core/src/main/resources/db.sql).

#### Настройк основного плагина

Основной плагин имеет следующую конфигурацию

```
database:
  url: jdbc:mysql://localhost:3306/chatsync
  user: user
  password: password
```
- ```database.url```: путь к базе данных
- ```database.user```: пользователь базы данных
- ```database.password```: пароль пользователя базы данных

### Настройки телеграм аддона

Аддон телеграм имеет следующую конфигурацию

```
telegram:
  token: token
  username: botName
```
- ```telegram.token```: токен бота, создается через [BotFather](https://t.me/BotFather)
- ```telegram.username```: имя бота

Для настройки привязанного чата необходимо подключиться к базе данных и вставить запись в таблицу group_links.
```SQL
INSERT INTO group_links (platform, context_path) VALUES ('telegram', <id чата>);
```

ID чата должен начинаться с -1 и иметь вид `-1003446286841`. Если в вашем чате существуют темы, вы можете указать кокнетный топик, добавив после id чата id топика следующим обратом `-1003446286841/383`

## Использование

После настройки все сообщения с сервера будут пересылаться ботом в телеграм чат и наоборот. Поддерживаются только сообщения, содержащие текст.

Также, бот имеет 3 команды, которые работают в личном чате.

- ```/link <ник игрока>``` - привязывает аккаунт игрока на сервере к телеграм аккаунту, позволяя другим игрокам отправлять ему личные сообщения с сервера в телеграм.
- ```/otp <код>``` - часть верификации пользователя, подтверждает, что аккаунт принадлежит этому пользователю.
- ```/msg <ник игрока> <сообщение>``` - отправляет внутриигровое сообщение игроку, который в данный момент находится на сервере.

Личные сообщения из игры в телеграм приходят в диалог с ботом.

## Материалы

* [Презентация](https://drive.google.com/file/d/1OlQ0QtEHxwyohjppWXdJLd_Ambsz3-IE/view?usp=drive_link)
* [Проморолик](https://drive.google.com/file/d/1TuqTLZkD9tEdnGOU9-ITQ1OK4gX2_h5f/view?usp=drive_link)
